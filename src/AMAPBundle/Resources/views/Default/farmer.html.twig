{%extends '::base.html.twig' %}
{% block contenu %}
    <div class="container">

        <h1>Producteur</h1>
        <section>
            <table id="example" class="table table-striped table-bordered display" cellspacing="0" width="100%">
                <thead>
                    <tr>
                        <th>Nom</th>
                        <th>Prenom</th>
                        <th>AMAP</th>
                        <th>Adresse</th>
                        <th>Mail</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in users%}
                        {% for group in user.getGroupNames() %}
                            {%if group=='FARMER'%}    
                                <tr>
                                    <td> {{ user.getName }}</td>
                                    <td> {{ user.getFirstName }}</td>
                                    <td>
                                        {%if user.getAmap()|length >0 %}
                                            {% for amap in user.getAmap() %}
                                                {%if amap.getName() != null and amap.getName() is not empty and amap|length >0 %}
                                                    {{ amap.getName() }}
                                                {%endif%}
                                            {% endfor %}
                                        {% else %}
                                            <p>aucune</p>
                                        {%endif%}
                                    </td>
                                    <td> {{ user.getAdress }}</td>
                                    <td> {{ user.getEmail }}</td>
                                </tr>
                            {% endif %}
                        {% endfor %}
                    {% endfor %}
                </tbody>
            </table>
        </section>
    </div>
{% endblock %}

